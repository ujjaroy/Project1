trigger:
  branches:
    include:
      - dev

variables:
  GIT_TERMINAL_PROMPT: '1'

jobs:
- job: CloneAndPush
  displayName: 'Clone from GitHub and Push to Azure DevOps'
  pool:
    name: 'Self Pool'
  steps:
  - checkout: self

  - script: |
      git clone https://github.com/UjjalKrRoy/AZ_Repo.git D:\AzureDevops\AZ_Git\ClonedRepo
      cd "D:\AzureDevops\AZ_Git\ClonedRepo"
      git init D:\AzureDevops\AZ_Git\ClonedRepo
      git remote rm origin
      git -c http.extraheader="AUTHORIZATION: bearer $(System.AccessToken)" remote add origin https://ujjalkrroy0295@dev.azure.com/ujjalkrroy0295/MyProject/_git/AZ_Repo
      git remote -v
      git -c http.extraheader="AUTHORIZATION: bearer $(System.AccessToken)" push origin --all
    displayName: 'Push to Azure DevOps'

#  - script: |
#      git remote rm origin
#      git remote add origin https://ujjalkrroy0295@dev.azure.com/ujjalkrroy0295/MyProject/_git/AZ_Repo
#      git remote -v
#      git fetch https://gfwph632epwwv3bdzevt27x5q6gelg7kcseph7eeymcrgvcfrcha@ujjalkrroy0295@dev.azure.com/ujjalkrroy0295/MyProject/_git/AZ_Repo
#      git push --all
#    displayName: 'Push to Azure DevOps'